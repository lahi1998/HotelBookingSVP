<app-staffNav></app-staffNav>

<div class="container">
    <div class="table-wrapper left">
        <h2>Bookings</h2>
        <input style="width: auto; margin: 5px;" matInput [(ngModel)]="filterValue" (ngModelChange)="searchFilter()"
            placeholder="Søg" />
        <div class="table-border">
            <table mat-table [dataSource]="dataSourceList" class="mat-elevation-z8">

                <!-- Fullname Column -->
                <ng-container matColumnDef="fullName">
                    <th mat-header-cell *matHeaderCellDef> Fulde navn </th>
                    <td mat-cell *matCellDef="let BookingListItem"> {{BookingListItem.customer.fullName}} </td>
                </ng-container>

                <!-- Email Column -->
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef> Email </th>
                    <td mat-cell *matCellDef="let BookingListItem"> {{BookingListItem.customer.email}} </td>
                </ng-container>

                <!-- phoneumber Column -->
                <ng-container matColumnDef="phoneNumber">
                    <th mat-header-cell *matHeaderCellDef> Telefon nummer </th>
                    <td mat-cell *matCellDef="let BookingListItem"> {{BookingListItem.customer.phoneNumber}} </td>
                </ng-container>

                <!-- roomCount Column -->
                <ng-container matColumnDef="roomCount">
                    <th mat-header-cell *matHeaderCellDef> Antal værelser </th>
                    <td mat-cell *matCellDef="let BookingListItem"> {{BookingListItem.roomCount}} </td>
                </ng-container>

                <!-- startDate Column -->
                <ng-container matColumnDef="startDate">
                    <th mat-header-cell *matHeaderCellDef> Start dato </th>
                    <td mat-cell *matCellDef="let BookingListItem">
                        {{ BookingListItem.startDate | date:'dd.MM.yyyy' }}
                    </td>
                </ng-container>

                <!-- endDate Column -->
                <ng-container matColumnDef="endDate">
                    <th mat-header-cell *matHeaderCellDef> slut dato </th>
                    <td mat-cell *matCellDef="let BookingListItem">
                        {{ BookingListItem.endDate | date:'dd.MM.yyyy' }}
                    </td>
                </ng-container>

                <!-- Actions Column -->
                <ng-container matColumnDef="buttons">
                    <th style="border-right: none;" mat-header-cell *matHeaderCellDef></th>
                    <td style="border-right: none;" mat-cell *matCellDef="let BookingListItem">
                        <button class="edit" (click)="EditRow(BookingListItem.id)">Rediger</button>
                        <button class="delete" (click)="DeleteRow(BookingListItem.id)">Slet</button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsList"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsList;"></tr>
            </table>

            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
            </mat-paginator>
        </div>
    </div>

    <div class="edit-booking">
        <div [formGroup]="bookingDetailsForm" (ngSubmit)="onSubmit()" class="edit-booking-inner ">
            <div class="div1">
                <label>Fulde navn</label>
                <div class="form-group">
                    <input type="text" formControlName="fullName" placeholder="Indtast fuldt navn" autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('fullName')?.invalid && bookingDetailsForm.get('fullName')?.touched">
                        Fuldt navn er påkrævet
                    </div>
                </div>

                <label>Email</label>
                <div class="form-group">
                    <input type="text" formControlName="email" placeholder="Indtast email" autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('email')?.invalid && bookingDetailsForm.get('email')?.touched">
                        Email er påkrævet
                    </div>
                </div>

                <label>Telefon nummer</label>
                <div class="form-group">
                    <input type="text" formControlName="phoneNumber" placeholder="Indtast telefon nummer"
                        autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('phoneNumber')?.invalid && bookingDetailsForm.get('phoneNumber')?.touched">
                        Telefon nummer er påkrævet
                    </div>
                </div>

                <label>Start dato</label>
                <div class="form-group">
                    <input type="date" formControlName="startDate" autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('startDate')?.invalid && bookingDetailsForm.get('startDate')?.touched">
                        start dato er påkrævet
                    </div>
                </div>

                <label>Slut dato</label>
                <div class="form-group">
                    <input type="date" formControlName="endDate" autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('endDate')?.invalid && bookingDetailsForm.get('endDate')?.touched">
                        slut dato er påkrævet
                    </div>
                </div>

                <label>Antal personer</label>
                <div class="form-group">
                    <input type="number" formControlName="personCount" 
                        autocomplete="off" />
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('personCount')?.invalid && bookingDetailsForm.get('personCount')?.touched">
                        Telefon nummer er påkrævet
                    </div>
                </div>

                <div>
                    <p>Samlet pris: {{totalprice}} kr</p>
                </div>

                <label>Ønsker og bemærkninger</label>
                <div class="form-group">
                    <textarea rows="10" type="text" formControlName="comment"></textarea>
                    <div class="error"
                        *ngIf="bookingDetailsForm.get('comment')?.invalid && bookingDetailsForm.get('comment')?.touched">
                        slut dato er påkrævet
                    </div>
                </div>
            </div>

            <div class="div2">
                <button class="cleaning" type="button">Opret rengøring</button>
                <button class="checkin/out" type="button">Tjek ind</button>

                <button class="update" type="submit">Gem</button>
            </div>
        </div>
        <div class="table-wrapper" style="max-width: 100%;">
            <h2>Booked værelser</h2>
            <div class="table-border">
                <table mat-table [dataSource]="dataSourceRooms" class="mat-elevation-z8">

                    <!-- number Column -->
                    <ng-container matColumnDef="number">
                        <th mat-header-cell *matHeaderCellDef> nummer </th>
                        <td mat-cell *matCellDef="let BookingDetailsRoom"> {{BookingDetailsRoom.number}} </td>
                    </ng-container>

                    <!-- Floor Column -->
                    <ng-container matColumnDef="floor">
                        <th mat-header-cell *matHeaderCellDef> Etage </th>
                        <td mat-cell *matCellDef="let BookingDetailsRoom"> {{BookingDetailsRoom.floor}} </td>
                    </ng-container>

                    <!-- roomType Column -->
                    <ng-container matColumnDef="roomType">
                        <th mat-header-cell *matHeaderCellDef> Værelses type </th>
                        <td mat-cell *matCellDef="let BookingDetailsRoom"> {{BookingDetailsRoom.roomType.name}}
                        </td>
                    </ng-container>

                    <!-- roomCount Column -->
                    <ng-container matColumnDef="bedAmount">
                        <th mat-header-cell *matHeaderCellDef> Antal senge </th>
                        <td mat-cell *matCellDef="let BookingDetailsRoom"> {{BookingDetailsRoom.bedAmount}} </td>
                    </ng-container>


                    <!-- Actions Column -->
                    <ng-container matColumnDef="buttons">
                        <th style="border-right: none;" mat-header-cell *matHeaderCellDef>
                            <button class="create">Opret</button>
                        </th>
                        <td style="border-right: none;" mat-cell *matCellDef="let BookingListItem">
                            <button class="delete">Slet</button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsDetails"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsDetails;"></tr>
                </table>

                <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
                </mat-paginator>
            </div>
        </div>
    </div>
</div>